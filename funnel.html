<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AffiliGen AI Funnel Tool üáÆüá©</title>

<style>
body{margin:0;font-family:Arial,sans-serif;background:radial-gradient(circle at top,#0f172a,#020617 60%);color:#e5e7eb;padding:20px;}
h1,h2,h3{margin:0}
.card{background:rgba(2,6,23,.95);border:1px solid rgba(56,189,248,.15);border-radius:18px;padding:20px;margin-bottom:20px;box-shadow:0 12px 35px rgba(0,0,0,.5);}
label{display:block;margin-top:12px;font-weight:bold;}
textarea,input,select{width:100%;padding:10px;margin-top:6px;border-radius:12px;border:none;background:#020617;color:#e5e7eb;font-size:14px;}
button{padding:12px;width:100%;margin-top:16px;border-radius:12px;border:none;background:#38bdf8;color:#020617;font-weight:bold;font-size:14px;cursor:pointer;transition:.25s;}
button:hover{box-shadow:0 0 28px rgba(56,189,248,.6);}
.preview{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
.preview img{width:70px;height:70px;object-fit:cover;border-radius:10px;border:1px solid rgba(56,189,248,.3);}
.output{margin-top:12px;padding:14px;background:rgba(2,6,23,.95);border:1px solid rgba(56,189,248,.15);border-radius:14px;white-space:pre-wrap;font-size:13px;}
.copyBtn{margin-top:10px;background:#020617;color:#38bdf8;border:1px solid rgba(56,189,248,.3);}
</style>
</head>
<body>

<div class="card">
<h1>AffiliGen AI Funnel Tool üáÆüá©</h1>
<p>Isi referensi produk, model, gerakan, dan gaya. Pilih step funnel untuk generate prompt.</p>

<label>Referensi Produk</label>
<textarea id="produk" placeholder="Contoh: Skincare acne brand lokal"></textarea>
<input type="file" id="produkImg" accept="image/*" multiple>
<div id="produkPreview" class="preview"></div>

<label>Referensi Model</label>
<textarea id="model" placeholder="Contoh: Wanita Indonesia 20-an"></textarea>
<input type="file" id="modelImg" accept="image/*" multiple>
<div id="modelPreview" class="preview"></div>

<label>Referensi Gerakan / Motion</label>
<textarea id="gerakan" placeholder="Contoh: Unboxing, close-up, before-after"></textarea>

<label>Gaya Visual</label>
<input id="gaya" placeholder="cinematic / clean / dramatic" />

<label>Pilih Funnel Step</label>
<select id="funnelCategory">
  <option value="hook">Hook ‚Äì Stop Scroll</option>
  <option value="problem">Problem ‚Äì Pain Point</option>
  <option value="solution">Solution ‚Äì Transformasi</option>
  <option value="cta">CTA ‚Äì Jualan</option>
</select>

<label>Catatan / Context (Optional)</label>
<textarea id="context" placeholder="Tambahkan catatan / persona / tone"></textarea>

<h3>Preview Prompt</h3>
<div id="previewPrompt" class="output">‚Äî</div>

<button onclick="saveAndNext()">üíæ Simpan & Lanjut</button>
<button class="copyBtn" onclick="copyPrompt()">üìã Copy Prompt</button>
<button class="copyBtn" onclick="exportPrompt()">‚¨áÔ∏è Download Prompt (.txt)</button>
</div>

<script>
// --- IMAGE PREVIEW ---
function previewImages(input, targetId){
  const preview=document.getElementById(targetId);
  preview.innerHTML='';
  const files=Array.from(input.files).slice(0,5);
  files.forEach(file=>{
    const img=document.createElement('img');
    img.src=URL.createObjectURL(file);
    preview.appendChild(img);
  });
  if(input.files.length>5) alert("Maksimal 5 gambar saja!");
}
produkImg.onchange=()=>previewImages(produkImg,'produkPreview');
modelImg.onchange=()=>previewImages(modelImg,'modelPreview');

// --- LOCAL STORAGE ---
function saveInput(){
  const data={
    produk:produk.value,
    model:model.value,
    gerakan:gerakan.value,
    gaya:gaya.value,
    funnelCategory:funnelCategory.value,
    context:context.value
  };
  localStorage.setItem('funnelData',JSON.stringify(data));
}
function loadInput(){
  const data=JSON.parse(localStorage.getItem('funnelData')||'{}');
  if(data.produk) produk.value=data.produk;
  if(data.model) model.value=data.model;
  if(data.gerakan) gerakan.value=data.gerakan;
  if(data.gaya) gaya.value=data.gaya;
  if(data.funnelCategory) funnelCategory.value=data.funnelCategory;
  if(data.context) context.value=data.context;
  updatePreview();
}

// --- PREVIEW PROMPT ---
function updatePreview(){
  const stepMap={
    hook:"HOOK ‚Äì STOP SCROLL: Fokus attention, shocking first frame",
    problem:"PROBLEM ‚Äì PAIN POINT: Relatable struggle & emotion",
    solution:"SOLUTION ‚Äì TRANSFORMATION: Visual result & benefit",
    cta:"CTA ‚Äì ACTION: Call-to-action & urgency"
  };
  const step=funnelCategory.value;
  const prompt=`${stepMap[step]}

Produk: ${produk.value}
Model: ${model.value}
Gerakan: ${gerakan.value}
Style: ${gaya.value}
Catatan / Context: ${context.value}
Gunakan gambar yang di-upload sebagai referensi visual.`;
  previewPrompt.innerText=prompt;
}

// --- SAVE & NEXT ---
function saveAndNext(){
  saveInput();
  // Tetap di halaman yang sama, cukup pilih step baru
  updatePreview();
}

// --- COPY & EXPORT ---
function copyPrompt(){
  navigator.clipboard.writeText(previewPrompt.innerText);
  alert("Prompt berhasil disalin ‚úÖ");
}
function exportPrompt(){
  const blob=new Blob([previewPrompt.innerText],{type:'text/plain'});
  const link=document.createElement('a');
  link.href=URL.createObjectURL(blob);
  link.download="AffiliGen_Funnel_Prompt.txt";
  link.click();
}

// --- EVENT LISTENER ---
produk.addEventListener('input',updatePreview);
model.addEventListener('input',updatePreview);
gerakan.addEventListener('input',updatePreview);
gaya.addEventListener('input',updatePreview);
context.addEventListener('input',updatePreview);
funnelCategory.addEventListener('change',updatePreview);

window.addEventListener('DOMContentLoaded',loadInput);
</script>

</body>
  </html>
